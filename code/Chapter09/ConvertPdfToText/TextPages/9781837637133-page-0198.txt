Chapter 4 165 SELECT COUNT(p.id) AS HowManyProductsComeFromGermany FROM Items p WHERE p.supplier.country = 'Germany' SELECT AVG(p.unitPrice) AS AverageUnitPrice FROM Items p Although queries defined using strings are the most common way of working with Cosmos DB, you can also create permanently stored objects using server-side programming. Exploring server-side programming Azure Cosmos DB server-side programming consists of stored procedures, triggers, and user-defined functions (UDFs) written in JavaScript. Implementing user-defined functions UDFs can only be called from within a query, and they implement custom business logic like calcu- lating tax. Letâ€™s define a UDF to calculate the sales tax of products: 1. In the Azure Cosmos DB Emulator or Azure portal Data Explorer, create a new UDF, as shown in Figure 4.9: Figure 4.9: Creating a new UDF 2. For the User Defined Function Id, enter salesTax. For the User Defined Function Body, enter JavaScript to define the salesTax function, as 3. shown in the following code: function salesTax(unitPrice){ return unitPrice * 0.2; } 