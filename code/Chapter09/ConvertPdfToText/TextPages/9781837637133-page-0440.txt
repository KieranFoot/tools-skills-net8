Chapter 9 407 if (message is null || productId is null) { model.Error = "Please enter a message and a product ID."; return View(model); } model.Message.Text = message; model.Message.Product = new() { ProductId = productId.Value }; HttpClient client = _httpClientFactory.CreateClient( name: "Northwind.WebApi.Service"); HttpRequestMessage request = new( method: HttpMethod.Get, requestUri: $"api/products/{productId}"); HttpResponseMessage response = await client.SendAsync(request); if (response.IsSuccessStatusCode) { Product? product = await response.Content. ReadFromJsonAsync<Product>(); if (product is not null) { model.Message.Product = product; } } // Create a RabbitMQ factory. ConnectionFactory factory = new() { HostName = "localhost" }; using IConnection connection = factory.CreateConnection(); using IModel channel = connection.CreateModel(); string queueNameAndRoutingKey = "product"; // If the queue does not exist, it will be created. // If the Docker container is restarted, the queue will be lost. 