Caching, Queuing, and Resilient Background Services 370 However, networks are much faster than they used to be, and systems often run within remote data centers. Imagine your service needs some data. Is it faster to read from the local server disk or to make a call to another server? • Server-to-server call within the same data center: 500,000 nanoseconds (ns) • Disk seek: 10,000,000 ns Numbers every (developer) should know Jeff Dean, a Google Fellow, quotes in his presentations the actual times in nanoseconds (ns) for various technologies to access or read data. They are shown in Table 9.1, and I have added a column to scale the numbers to be more comprehensible to a human: Technology Actual Humanized CPU cycle 0.1 ns 1 second L1 cache reference ½ ns 5 seconds L2 cache reference 5 ns 1 minute Mutex lock/unlock 25 ns 4 minutes Main memory reference 100 ns ¼ hour Send 1K byte over 1 Gbps network 10,000 ns 28 hours Read 1 MB sequentially from memory 250,000 ns 29 days Round trip within same datacenter 500,000 ns 2 months Read 1 MB sequentially from SSD 1,000,000 ns 4 months Disk seek 10,000,000 ns 3¼ years Read 1 MB sequentially from disk 20,000,000 ns 6¼ years Send packet CA->Netherlands->CA 150,000,000 ns 47½ years Table 9.1: Nanosecond times for various technologies to access or read data More Information: Designs, Lessons, and Advice from Building Large Distributed Systems, by Jeff Dean, http://www.cs.cornell.edu/projects/ladis2009/talks/dean-keynote- ladis2009.pdf. The point is not to debate if reading from drives or SSDs is faster or not than network calls. It is more about being aware of the differences between getting data that’s close and data that’s far away. The orders of magnitude are comparatively massive. For example, if a CPU needs to process some data and it is already in the L1 cache, then it takes the equivalent of 1 second. If it needs to read the data from memory, it takes the equivalent of a quarter of an hour. If it needs to fetch that data from a server in the same data center, it takes the equivalent of 2 months. And if it is in California and the data is in the Netherlands, it takes the equivalent of 47½ years! 