Working with Files, Streams, and Serialization 488 With .NET 6 and later, there is a new API for working with files without needing a file stream and in a random access way. Let’s see a simple example: 1. Use your preferred code editor to add a new Console App / console project named WorkingWithRandomAccess to the Chapter09 solution: System.Console class statically and globally. 2. In the project file, add an element to import the Program.cs, delete the existing statements, and then get a handle to a file named coffee. 3. In , as shown in the following code: txt using Microsoft.Win32.SafeHandles; // To use SafeFileHandle. using System.Text; // To use Encoding. using SafeFileHandle handle = File.OpenHandle(path: "coffee.txt", mode: FileMode.OpenOrCreate, access: FileAccess.ReadWrite); 4. Write some text encoded as a byte array, and then store it in a read-only memory buffer to the file, as shown in the following code: string message = "Café £4.39"; ReadOnlyMemory<byte> buffer = new(Encoding.UTF8.GetBytes(message)); await RandomAccess.WriteAsync(handle, buffer, fileOffset: 0); 5. To read from the file, get the length of the file, allocate a memory buffer for the contents using that length, and then read the file, as shown in the following code: long length = RandomAccess.GetLength(handle); Memory<byte> contentBytes = new(new byte[length]); await RandomAccess.ReadAsync(handle, contentBytes, fileOffset: 0); string content = Encoding.UTF8.GetString(contentBytes.ToArray()); WriteLine($"Content of file: {content}"); 6. Run the code, and note the content of the file, as shown in the following output: Content of file: Café £4.39 Encoding and decoding text Text characters can be represented in different ways. For example, the alphabet can be encoded using Morse code into a series of dots and dashes for transmission over a telegraph line. In a similar way, text inside a computer is stored as bits (ones and zeros) representing a code point within a code space. Most code points represent a single character, but they can also have other meanings like formatting. 