Chapter 9 485 Stream compressor; if (algorithm == "gzip") { compressor = new GZipStream(file, CompressionMode.Compress); } else { compressor = new BrotliStream(file, CompressionMode.Compress); } using (compressor) { using (XmlWriter xml = XmlWriter.Create(compressor)) { xml.WriteStartDocument(); xml.WriteStartElement("callsigns"); foreach (string item in Viper.Callsigns) { xml.WriteElementString("callsign", item); } } } // Also closes the underlying stream. OutputFileInfo(filePath); // Read the compressed file. WriteLine("Reading the compressed XML file:"); file = File.Open(filePath, FileMode.Open); Stream decompressor; if (algorithm == "gzip") { decompressor = new GZipStream( file, CompressionMode.Decompress); } else { decompressor = new BrotliStream( file, CompressionMode.Decompress); } using (decompressor) 