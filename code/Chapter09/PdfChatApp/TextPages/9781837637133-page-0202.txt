Chapter 4 169 SectionTitle("Executing the insertProduct stored procedure"); try { using (CosmosClient client = new( accountEndpoint: endpointUri, authKeyOrResourceToken: primaryKey)) { Container container = client.GetContainer( databaseId: "Northwind", containerId: "Products"); string pid = "78"; ProductCosmos product = new() { id = pid, productId = pid, productName = "Barista's Chilli Jam", unitPrice = 12M, unitsInStock = 10 }; StoredProcedureExecuteResponse<string> response = await container. Scripts .ExecuteStoredProcedureAsync<string>("insertProduct", new PartitionKey(pid), new[] { product }); WriteLine("Status code: {0}, Request charge: {1} RUs.", response.StatusCode, response.RequestCharge); } } catch (HttpRequestException ex) { WriteLine($"Error: {ex.Message}"); WriteLine("Hint: If you are using the Azure Cosmos Emulator then please make sure it is running."); } catch (Exception ex) { WriteLine("Error: {0} says {1}", arg0: ex.GetType(), arg1: ex.Message); } } 