Writing, Debugging, and Testing Functions 210 Console.WriteLine("--{0} contents--", settingsFile); Console.WriteLine(File.ReadAllText(settingsPath)); Console.WriteLine("----"); ConfigurationBuilder builder = new(); builder.SetBasePath(Directory.GetCurrentDirectory()); // Add the settings file to the processed configuration and make it // mandatory so an exception will be thrown if the file is not found. builder.AddJsonFile(settingsFile, optional: false, reloadOnChange: true); IConfigurationRoot configuration = builder.Build(); TraceSwitch ts = new( displayName: "PacktSwitch", description: "This switch is set via a JSON config."); configuration.GetSection("PacktSwitch").Bind(ts); Console.WriteLine($"Trace switch value: {ts.Value}"); Console.WriteLine($"Trace switch level: {ts.Level}"); Trace.WriteLineIf(ts.TraceError, "Trace error"); Trace.WriteLineIf(ts.TraceWarning, "Trace warning"); Trace.WriteLineIf(ts.TraceInfo, "Trace information"); Trace.WriteLineIf(ts.TraceVerbose, "Trace verbose"); If the appsettings.json file is not found, then the following exception will be thrown: System.IO.FileNotFoundException: The configuration file 'appsettings.json' was not found and is not optional. The expected physical path was 'C:\cs12dotnet8\Chapter04\Instrumenting\bin\ Debug\net8.0\appsettings.json'. 