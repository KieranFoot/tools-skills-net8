Building and Securing Web Services Using Minimal APIs 360 6. Open the NorthwindJsonSerializerContext.Decimal.g.cs file, and note it contains code to serialize a decimal value passed as the minimum unit price parameter to one of the routes. Open the NorthwindJsonSerializerContext.ListProduct.g.cs file, and note it contains code 7. to serialize a list of Product objects returned as a response for two of the routes. Northwind.MinimalAot.Service folder, at the command prompt or terminal, publish 8. In the the web service using native AOT, as shown in the following command: dotnet publish 9. Note the message about generating native code and trim warnings for packages like Microsoft. Data.SqlClient, as shown in the following partial output: Generating native code C:\Users\markj\.nuget\packages\microsoft.data.sqlclient\5.1.1\runtimes\ win\lib\net6.0\Microsoft.Data.SqlClient.dll : warning IL2104: Assembly 'Microsoft.Data.SqlClient' produced trim warnings. For more information see https://aka.ms/dotnet-illink/libraries [C:\apps-services-net8\ Chapter08\Northwind.MinimalAot.Service\Northwind.MinimalAot.Service. csproj] /_/src/libraries/System.Data.Common/src/System/Data/DataTable. cs(6704): Trim analysis warning IL2026: System.Data.DataTable.System. Xml.Serialization.IXmlSerializable.ReadXml(XmlReader): Using member 'System.Data.DataTable.ReadXmlSerializableInternal(XmlReader)' which has 'RequiresUnreferencedCodeAttribute' can break functionality when trimming application code. DataTable.ReadXml uses XmlSerialization underneath which is not trimming safe. Members from serialized types may be trimmed if not referenced directly. [C:\apps-services-net8\Chapter08\Northwind. MinimalAot.Service\Northwind.MinimalAot.Service.csproj] We did not use the DataTable.ReadXml method, which is calling a potentially trimmed member, so we can ignore the preceding warning. 10. Start File Explorer and open the bin\Release\net8.0\win-x64\publish folder and note the Microsoft.Data.SqlClient.SNI.dll file are the only EXE file is about 30 MB. This and the files that need to be deployed onto another Windows computer for the web service to work. The appsettings.json files are only needed to override configuration if needed. The PDB file is only needed if debugging. Run the Northwind.MinimalAot.Service.exe, and note the web service starts up very fast 11. and it will use port 5000 by default, as shown in Figure 8.11: 