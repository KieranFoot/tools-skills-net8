Chapter 10 543 • Enumerate through the categories, outputting the name and number of products for each one: using Microsoft.EntityFrameworkCore; // To use Include method. using Northwind.EntityModels; // To use Northwind, Category, Product. partial class Program { private static void QueryingCategories() { using NorthwindDb db = new(); SectionTitle("Categories and how many products they have"); // A query to get all categories and their related products. IQueryable<Category>? categories = db.Categories? .Include(c => c.Products); if (categories is null || !categories.Any()) { Fail("No categories found."); return; } // Execute query and enumerate results. foreach (Category c in categories) { WriteLine($"{c.CategoryName} has {c.Products.Count} products."); } } } Note that the order of the clauses in the if statement is important. We must check that categories is null first. If this is true, then the code will never execute the second clause and, therefore, won’t throw a NullReferenceException when accessing the Any() member. 